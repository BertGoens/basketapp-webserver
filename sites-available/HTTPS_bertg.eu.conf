# HTTP server
server {
    listen 80;
    listen [::]:80;
    server_name bertg.eu;
    # Force user to https by sending him a redirect 
    return 301 https://$server_name$request_uri;
}

# HTTPS server
server {
    listen 443 ssl;
    listen [::]:443 ssl;
    server_name bertg.eu;

    # The size of the ssl key matters a lot!
    # Smaller size = way faster requests/responses
    ssl_certificate          /etc/letsencrypt/live/bertg.eu/fullchain.pem;
    ssl_certificate_key      /etc/letsencrypt/live/bertg.eu/privkey.pem;

    # Set our nginx root directory to serve files from
    # This is our frontend
    root /Users/BertGoens/Programmeren/GitHub/basketapp-frontend/dist;

    # Error & Access logs
    error_log /Users/BertGoens/Programmeren/GitHub/basketapp/logs/error.log error;
    access_log /Users/BertGoens/Programmeren/GitHub/basketapp/logs/access.log;

    location / {
        root /Users/BertGoens/Programmeren/GitHub/basketapp-frontend/dist;
        # First look for files in our rootdir
        # Second pass through the request to our names location @NodeJSFrontend if we can't find it
        try_files $uri @NodeJSFrontend;
    }

	# Nginx looks in the root dir by default, so we have to make an alias for the favicon
    location /favicon.ico {
    	alias /Users/BertGoens/Programmeren/GitHub/basketapp-frontend/dist/assets/img/favicon/favicon.ico;
	}
}
